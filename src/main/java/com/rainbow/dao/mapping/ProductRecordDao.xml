<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rainbow.dao.ProductRecordDao">
 
	 
	 
	<select id="RecordList" resultType="ProductRecord">
		select 
			order_id orderId, 
			product_name productName,
			price price,
			count count,
			pr.address address,
			address_name addressName,
			address_phone addressPhone,
			u.user_name userName,
			pr.user_id userId,
			order_time orderTime,
			total_money totalMoney
		from product_record pr,user u  
		<where>
			pr.user_id=u.user_id
            <if test="productName!=null and productName!='' ">
				and product_name like concat('%',#{productName},'%')
		    </if>
            <if test="userName !=null and userName!=''">
				and u.user_name like concat('%',#{userName},'%')
		    </if>
		    <if test="userId !=1">
				and pr.user_id =#{userId}
		    </if>
		    <if test="orderTime !=null and orderTime!=''">
				and order_time like concat(#{orderTime},'%')
		    </if>
		</where>
	</select>
	 <delete id="DelProduct"  >
        delete from product_record where order_id =#{orderId}
    </delete>
	 
	 <insert id="addProductRecord"  parameterType="java.util.List">  
     
      insert into  product_record(add_time,emp_id,activity_id,flag)   
      values  
    <foreach collection="shopCardList" item="product" index="index" separator="," >  
        (#{product.addTime},#{item.empId},#{item.activityId},#{item.flag})  
    </foreach>  
  </insert> 

</mapper>